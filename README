What it does
============

It wraps the "requests" python library inserting headers, authentication etc and
making your requests to a host, provided as a command line argument.

It checks the response from the server for expected status codes and
body/header/json dpath contents and passes or fails the test based on definition.

Can be used to specify and pass/fail on performance of api response.

Copy/paste curl equivalent of the request is included in the output for
convenience.

Easily introduced into a CI/CD deploy pipeline.

Without --force, any API requests that are not GET's will be skipped as a safety
mechanism to ensure we're not overwriting or creating data unconciously.


Installation
============

git clone gitlab@git.bskyb.com/lsd/smolder.git
cd smolder
pip install .

Request Options
===============

name (required): name for the test
protocol (required): tcp, http, https or noop
port (required): 0 - 65535
url (required): /url/path/to/resource.json
method (optional): GET, POST, PUT, DELETE, OPTION
request_headers (recommended): header object to append to requests instansiation.  The host header is probably the most likely requirement.
username (optional): basic auth username
password (optional): basic auth password
cookie (optional): cookie object to append to requests instansiation
data (optional): data for POST or PUT.

Response Tests
==============

response_body_contains: PASS if string in body.
response_body_doesnt_contain: FAIL if string in body.
show_body: output the body to stdout.
response_max_time_ms: FAIL if response takes longer than int.
response_json_contains: FAIL if json response at path doesn't match.
expect_status_code: FAIL if response status code differs from int.
response_redirect: FAIL if string not in response location header.

Thanks
======

https://github.com/njsaunders
https://github.com/nielsdraaisma
https://github.com/lotia
